<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>GHC_blogs</title>
    <meta name="description" content="">
    <meta name="generator" content="VuePress 1.3.1">
    
    
    <link rel="preload" href="/blogs/assets/css/0.styles.72fac331.css" as="style"><link rel="preload" href="/blogs/assets/js/app.1da6cb40.js" as="script"><link rel="preload" href="/blogs/assets/js/2.2c761157.js" as="script"><link rel="preload" href="/blogs/assets/js/7.64e209ff.js" as="script"><link rel="prefetch" href="/blogs/assets/js/10.88a7fa8c.js"><link rel="prefetch" href="/blogs/assets/js/11.b40dc4b2.js"><link rel="prefetch" href="/blogs/assets/js/12.55a6250e.js"><link rel="prefetch" href="/blogs/assets/js/13.906313c0.js"><link rel="prefetch" href="/blogs/assets/js/3.1655ae01.js"><link rel="prefetch" href="/blogs/assets/js/4.f5f11129.js"><link rel="prefetch" href="/blogs/assets/js/5.bbd302bb.js"><link rel="prefetch" href="/blogs/assets/js/6.6e4c1c9f.js"><link rel="prefetch" href="/blogs/assets/js/8.df874cd9.js"><link rel="prefetch" href="/blogs/assets/js/9.b97fd203.js">
    <link rel="stylesheet" href="/blogs/assets/css/0.styles.72fac331.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blogs/" class="home-link router-link-active"><!----> <span class="site-name">GHC_blogs</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://github.com/Hongcheng1997" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://github.com/Hongcheng1997" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Javascript 基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>ES6</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Angular</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blogs/angular/angular.html" class="active sidebar-link">Angular 基本使用</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blogs/angular/angular.html#数据文本绑定" class="sidebar-link">数据文本绑定</a></li><li class="sidebar-sub-header"><a href="/blogs/angular/angular.html#绑定-html" class="sidebar-link">绑定 HTML</a></li><li class="sidebar-sub-header"><a href="/blogs/angular/angular.html#数据循环" class="sidebar-link">数据循环</a></li><li class="sidebar-sub-header"><a href="/blogs/angular/angular.html#管道" class="sidebar-link">管道</a></li><li class="sidebar-sub-header"><a href="/blogs/angular/angular.html#switch-判断" class="sidebar-link">switch 判断</a></li><li class="sidebar-sub-header"><a href="/blogs/angular/angular.html#条件判断" class="sidebar-link">条件判断</a></li><li class="sidebar-sub-header"><a href="/blogs/angular/angular.html#事件绑定" class="sidebar-link">事件绑定</a></li><li class="sidebar-sub-header"><a href="/blogs/angular/angular.html#属性绑定" class="sidebar-link">属性绑定</a></li><li class="sidebar-sub-header"><a href="/blogs/angular/angular.html#class-绑定" class="sidebar-link">class 绑定</a></li><li class="sidebar-sub-header"><a href="/blogs/angular/angular.html#style-绑定" class="sidebar-link">style 绑定</a></li><li class="sidebar-sub-header"><a href="/blogs/angular/angular.html#双向绑定" class="sidebar-link">双向绑定</a></li><li class="sidebar-sub-header"><a href="/blogs/angular/angular.html#get" class="sidebar-link">get</a></li><li class="sidebar-sub-header"><a href="/blogs/angular/angular.html#delete" class="sidebar-link">delete</a></li><li class="sidebar-sub-header"><a href="/blogs/angular/angular.html#post" class="sidebar-link">post</a></li><li class="sidebar-sub-header"><a href="/blogs/angular/angular.html#put" class="sidebar-link">put</a></li><li class="sidebar-sub-header"><a href="/blogs/angular/angular.html#拦截器" class="sidebar-link">拦截器</a></li><li class="sidebar-sub-header"><a href="/blogs/angular/angular.html#input" class="sidebar-link">@Input</a></li><li class="sidebar-sub-header"><a href="/blogs/angular/angular.html#output" class="sidebar-link">@Output</a></li><li class="sidebar-sub-header"><a href="/blogs/angular/angular.html#viewchild" class="sidebar-link">@ViewChild</a></li><li class="sidebar-sub-header"><a href="/blogs/angular/angular.html#_1、在查询参数中传值" class="sidebar-link">1、在查询参数中传值</a></li><li class="sidebar-sub-header"><a href="/blogs/angular/angular.html#_2、在路由路径中传值" class="sidebar-link">2、在路由路径中传值</a></li><li class="sidebar-sub-header"><a href="/blogs/angular/angular.html#_3、在路由配置中传值" class="sidebar-link">3、在路由配置中传值</a></li><li class="sidebar-sub-header"><a href="/blogs/angular/angular.html#路由守卫" class="sidebar-link">路由守卫</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Webpack</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p>最近开始使用 angular 做项目，写这篇文章目的是记录 angular 基本的使用，方便快速上手，也是为了防止与其他两个框架混淆。</p> <h1 id="脚手架命令"><a href="#脚手架命令" class="header-anchor">#</a> 脚手架命令</h1> <div class="language- extra-class"><pre class="language-text"><code>// 安装脚手架
npm install -g @angular/cli

// 创建项目
ng new myApp

// 启动项目
ng serve --open

// 创建自定义组件
ng generate component my-new-component

// 创建服务
ng generate service my-new-service

// 创建路由守卫
ng generate guard my-new-guard

// 创建自定义指令
ng generate directive my-new-directive
</code></pre></div><h1 id="生命周期"><a href="#生命周期" class="header-anchor">#</a> 生命周期</h1> <p>生命周期的顺序</p> <div class="language- extra-class"><pre class="language-text"><code>ngOnChanges

当有父组件传值给子组件，数据发生改变时，子组件会触发该生命周期

ngOnInit

初始化完成组件后，调用该钩子

ngDoCheck

变更检测，在发生 Angular 无法自己检测的变化时作出反应。

ngAfterContentInit

当 Angular 把外部内容投影进组件/指令的视图之后调用

ngAfterContentChecked

每当 Angular 完成被投影组件内容的变更检测之后调用。

ngAfterViewInit

初始化完组件视图及其子视图之后调用

ngAfterViewChecked

每当 Angular 做完组件视图和子视图的变更检测之后调用。

ngOnDestroy

销毁组件时调用
</code></pre></div><h1 id="模板语法"><a href="#模板语法" class="header-anchor">#</a> 模板语法</h1> <h2 id="数据文本绑定"><a href="#数据文本绑定" class="header-anchor">#</a> 数据文本绑定</h2> <div class="language- extra-class"><pre class="language-text"><code>{{title}}
</code></pre></div><h2 id="绑定-html"><a href="#绑定-html" class="header-anchor">#</a> 绑定 HTML</h2> <div class="language- extra-class"><pre class="language-text"><code>&lt;div [innerHTML]=&quot;h&quot;&gt;&lt;/div&gt;
</code></pre></div><h2 id="数据循环"><a href="#数据循环" class="header-anchor">#</a> 数据循环</h2> <div class="language- extra-class"><pre class="language-text"><code>&lt;ul&gt;
 &lt;li *ngFor=&quot;let item of list;let i = index;&quot;&gt;
  {{item}}
 &lt;/li&gt;
&lt;/ul&gt;
</code></pre></div><h2 id="管道"><a href="#管道" class="header-anchor">#</a> 管道</h2> <p>管道（pipe）是用来对输入的数据进行处理，如大小写转换、数值和日期格式化等。</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;p&gt;{{today | date:'yyyy-MM-dd HH:mm:ss' }}&lt;/p&gt;

today: any = new Date()
</code></pre></div><h2 id="switch-判断"><a href="#switch-判断" class="header-anchor">#</a> switch 判断</h2> <div class="language- extra-class"><pre class="language-text"><code>&lt;ul [ngSwitch]=&quot;title&quot;&gt;
    &lt;li *ngSwitchCase=&quot;1&quot;&gt;1&lt;/li&gt;
    &lt;li *ngSwitchCase=&quot;2&quot;&gt;2&lt;/li&gt;
    &lt;li *ngSwitchDefault&gt;3&lt;/li&gt;
&lt;/ul&gt;
</code></pre></div><h2 id="条件判断"><a href="#条件判断" class="header-anchor">#</a> 条件判断</h2> <div class="language- extra-class"><pre class="language-text"><code>&lt;p *ngIf=&quot;list.length &gt; 3&quot;&gt;这是 ngIF 判断是否显示&lt;/p&gt;
</code></pre></div><h2 id="事件绑定"><a href="#事件绑定" class="header-anchor">#</a> 事件绑定</h2> <div class="language- extra-class"><pre class="language-text"><code>&lt;button class=&quot;button&quot; (click)=&quot;getData()&quot;&gt;
 点击按钮触发事件
&lt;/button&gt;
</code></pre></div><h2 id="属性绑定"><a href="#属性绑定" class="header-anchor">#</a> 属性绑定</h2> <div class="language- extra-class"><pre class="language-text"><code>&lt;div [id]=&quot;id&quot; [title]=&quot;msg&quot;&gt;调试工具看看我的属性&lt;/div&gt;
</code></pre></div><h2 id="class-绑定"><a href="#class-绑定" class="header-anchor">#</a> class 绑定</h2> <div class="language- extra-class"><pre class="language-text"><code>&lt;p [ngClass]=&quot;{'red':isTrue}&quot;&gt;red&lt;/p&gt;

&lt;p [class.red]=&quot;isTrue&quot;&gt;red&lt;/p&gt;
</code></pre></div><h2 id="style-绑定"><a href="#style-绑定" class="header-anchor">#</a> style 绑定</h2> <div class="language- extra-class"><pre class="language-text"><code>&lt;p [ngStyle]=&quot;{'background-color':color}&quot;&gt;red&lt;/p&gt;
</code></pre></div><h2 id="双向绑定"><a href="#双向绑定" class="header-anchor">#</a> 双向绑定</h2> <div class="language- extra-class"><pre class="language-text"><code>&lt;input [(ngModel)]=&quot;inputValue&quot;&gt;

注意在 app.module.ts 引入 FormsModule
import { FormsModule } from '@angular/forms';

@NgModule({
 declarations: [
     AppComponent
 ],
 imports: [
     BrowserModule,
     FormsModule
 ],
 providers: [],
 bootstrap: [AppComponent]
})

export class AppModule { }
</code></pre></div><h1 id="创建服务"><a href="#创建服务" class="header-anchor">#</a> 创建服务</h1> <p>服务可用来封装一些共用的逻辑，也能做状态管理。通过 ng g service storage 创建 storage 文件</p> <p>在 app.module.ts 里面引入创建的服务</p> <div class="language- extra-class"><pre class="language-text"><code>import { StorageService } from './services/storage.service';

@NgModule({
 declarations: [
    ...
 ],
 imports: [
    ...
 ],
 providers: [ StorageService ],
 bootstrap: [ ... ]
})
export class AppModule { }
</code></pre></div><p>修改 storage.service.ts</p> <div class="language- extra-class"><pre class="language-text"><code>import { Injectable } from '@angular/core';

@Injectable({
  providedIn: 'root'
})
export class StorageService {
  public name: string = 'ghc'

  constructor() { }

}
</code></pre></div><p>在使用的页面注册服务</p> <div class="language- extra-class"><pre class="language-text"><code>import { StorageService } from '../../services/storage.service';
constructor(private storage: StorageService) {}

ngOnInit() {
    console.log(this.storage.name)
}
</code></pre></div><h1 id="httpclient"><a href="#httpclient" class="header-anchor">#</a> HttpClient</h1> <p>HttpClient 是 angular 自带的 http 模块</p> <div class="language- extra-class"><pre class="language-text"><code>1、在 app.module.ts 引入 http 模块

import { HttpClientModule } from '@angular/common/http';

2、HttpClientModule 依赖注入

@NgModule({
 declarations: [ ... ],
imports: [
    HttpClientModule
],
providers: [ ... ],
bootstrap: [ ... ]
})

export class AppModule { }
</code></pre></div><h2 id="get"><a href="#get" class="header-anchor">#</a> get</h2> <div class="language- extra-class"><pre class="language-text"><code>1、在需要请求数据的地方引入 HttpClient

    import { HttpClient } from &quot;@angular/common/http&quot;;

2、构造函数内声明：

    constructor(private http: HttpClient) { }

3、在对应方法里使用 http：

    this.http.get(url, { params: {} }).subscribe(function(data){
        console.log(data);
    },function(err){
        console.log(err);
    });
</code></pre></div><h2 id="delete"><a href="#delete" class="header-anchor">#</a> delete</h2> <div class="language- extra-class"><pre class="language-text"><code>1、在需要请求数据的地方引入 HttpClient

    import { HttpClient } from &quot;@angular/common/http&quot;;

2、构造函数内声明：

    constructor(private http: HttpClient) { }

3、在对应方法里使用 http：

    this.http.delete(url, { params: {} }).subscribe(function(data){
        console.log(data);
    },function(err){
        console.log(err);
    });
</code></pre></div><h2 id="post"><a href="#post" class="header-anchor">#</a> post</h2> <div class="language- extra-class"><pre class="language-text"><code>1、引入 Headers 、Http 模块

    import { HttpClient, HttpHeaders, HttpParams } from &quot;@angular/common/http&quot;;

2、实例化 Headers

    public httpOptions = {
        headers: new HttpHeaders({ 'Content-Type': 'application/json' })
    };

    public httpForm = { 
        headers: new HttpHeaders(
            { 'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8' }
        ) 
    };

3、post 提交数据

    // json 格式传参
    this.http.post(api, { username:'张三', age:'20' }, this.httpOptions)
    .subscribe(response =&gt; {
        console.log(response);
    });

    // 序列化参数
    const params = new HttpParams({
      fromObject: query // 传入的参数对象
    })

    this.http.post(api, params, this.httpForm).subscribe(response =&gt; {
        console.log(response);
    });
</code></pre></div><h2 id="put"><a href="#put" class="header-anchor">#</a> put</h2> <div class="language- extra-class"><pre class="language-text"><code>1、引入 Headers 、Http 模块

    import { HttpClient, HttpHeaders } from &quot;@angular/common/http&quot;;

2、实例化 Headers

    public httpOptions = {
        headers: new HttpHeaders({ 'Content-Type': 'application/json' })
    };

3、put 提交数据

    this.http.put(api, { }, this.httpOptions).subscribe(response =&gt; {
        console.log(response);
    });
</code></pre></div><h2 id="拦截器"><a href="#拦截器" class="header-anchor">#</a> 拦截器</h2> <p>创建 interceptor.service.ts 文件</p> <div class="language- extra-class"><pre class="language-text"><code>import { Injectable } from '@angular/core';
import { HttpEvent, HttpInterceptor, HttpHandler, HttpResponse } from '@angular/common/http';
import { Observable } from 'rxjs';
import { finalize, tap } from 'rxjs/operators';

@Injectable()
export class NoopInterceptor implements HttpInterceptor {
    intercept(req: any, next: HttpHandler):
        Observable&lt;HttpEvent&lt;any&gt;&gt; {
        // 请求发出前执行
        console.log(req)
        return next.handle(req).pipe(
            tap(
                event =&gt; {
                    // 请求返回成功
                    if (event instanceof HttpResponse) {
                        console.log(event)
                    }
                },
                error =&gt; {
                    // 请求返回失败
                    console.log(error)
                }
            ),
            finalize(() =&gt; {
                // 不论成功还是失败都会执行
            })
        );
    }
}
</code></pre></div><p>在 app.module.ts 中引入</p> <div class="language- extra-class"><pre class="language-text"><code>import { NoopInterceptor } from &quot;./interceptor/interceptor.service&quot;

@NgModule({
 declarations: [
    ...
 ],
 imports: [
    ...
 ],
 providers: [
    { provide: HTTP_INTERCEPTORS, useClass: NoopInterceptor, multi: true }
 ],
 bootstrap: [
    ...
 ]
})

export class AppModule { }
</code></pre></div><h1 id="父子组件传值-input-output-viewchild"><a href="#父子组件传值-input-output-viewchild" class="header-anchor">#</a> 父子组件传值@Input @Output @ViewChild</h1> <h2 id="input"><a href="#input" class="header-anchor">#</a> @Input</h2> <div class="language- extra-class"><pre class="language-text"><code>1、父组件调用子组件的时候传入数据

&lt;app-header [msg]=&quot;msg&quot;&gt;&lt;/app-header&gt;

2、子组件引入 Input 模块

import { Component, OnInit ,Input } from '@angular/core';

3、子组件中 @Input 接收父组件传过来的数据

export class HeaderComponent implements OnInit {
 @Input() msg:string
 constructor() { }
 ngOnInit() {}
}
</code></pre></div><h2 id="output"><a href="#output" class="header-anchor">#</a> @Output</h2> <div class="language- extra-class"><pre class="language-text"><code>1、父组件监听子组件派发的事件

&lt;app-title text=&quot;编辑科室信息&quot; (closeOut)=&quot;fn()&quot;&gt;&lt;/app-title&gt;

2、子组件引入 Output, EventEmitter模块

import { Component, OnInit , Output, EventEmitter } from '@angular/core';

3、子组件中实例化一个自定义事件

export class TitleComponent implements OnInit {

  @Output() closeOut = new EventEmitter();

  close() {
    this.closeOut.emit()
  }
}
</code></pre></div><h2 id="viewchild"><a href="#viewchild" class="header-anchor">#</a> @ViewChild</h2> <p>可用来获取 dom 节点或者组件，类似 vue 的 ref 。</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;app-footer #footerChild&gt;&lt;/app-footer&gt;

import { OnInit, ViewChild } from '@angular/core';

export class HomeComponent implements OnInit {

  @ViewChild(&quot;footerChild&quot;) footer

  constructor() {
    console.log(this.footer.username)
  }

}
</code></pre></div><h1 id="路由"><a href="#路由" class="header-anchor">#</a> 路由</h1> <h2 id="_1、在查询参数中传值"><a href="#_1、在查询参数中传值" class="header-anchor">#</a> 1、在查询参数中传值</h2> <div class="language- extra-class"><pre class="language-text"><code>&lt;a routerLink=&quot;/news&quot; [queryParams]=&quot;{ id: 1 }&quot;&gt;跳转&lt;/a&gt;

import { ActivatedRoute } from '@angular/router';

constructor(private router: ActivatedRoute) { 
    this.router.queryParams.subscribe((v) =&gt; {
      console.log(v)
    })
}
</code></pre></div><h2 id="_2、在路由路径中传值"><a href="#_2、在路由路径中传值" class="header-anchor">#</a> 2、在路由路径中传值</h2> <div class="language- extra-class"><pre class="language-text"><code>&lt;a [routerLink]=&quot;['/map', 1]&quot;&gt;跳转&lt;/a&gt;

import { ActivatedRoute } from '@angular/router';

constructor(private router: ActivatedRoute) { 
    this.router.params.subscribe((v) =&gt; {
      console.log(v)
    })
}
</code></pre></div><h2 id="_3、在路由配置中传值"><a href="#_3、在路由配置中传值" class="header-anchor">#</a> 3、在路由配置中传值</h2> <div class="language- extra-class"><pre class="language-text"><code>&lt;a routerLink=&quot;/info&quot;&gt;跳转&lt;/a&gt;

{
    path: 'info',
    component: InfoComponent,
    data: [{ id: 2 }]
}

import { ActivatedRoute } from '@angular/router';

constructor(private router: ActivatedRoute) { 
    this.router.snapshot.data[0][&quot;id&quot;]
}
</code></pre></div><p>编程式写法</p> <div class="language- extra-class"><pre class="language-text"><code>import { Router } from '@angular/router';

this.router.navigate([&quot;url&quot;], { queryParams: { id: 1 } });
</code></pre></div><h2 id="路由守卫"><a href="#路由守卫" class="header-anchor">#</a> 路由守卫</h2> <p>通过命令行工具创建 auth 文件</p> <div class="language- extra-class"><pre class="language-text"><code>ng generate guard auth/auth
</code></pre></div><p>auth</p> <div class="language- extra-class"><pre class="language-text"><code>import { Injectable } from '@angular/core';
import { CanActivate, ActivatedRouteSnapshot, RouterStateSnapshot } from '@angular/router';

@Injectable({
  providedIn: 'root',
})
export class AuthGuard implements CanActivate {
  canActivate(
    next: ActivatedRouteSnapshot,
    state: RouterStateSnapshot): boolean {
    console.log('AuthGuard#canActivate called');
    return true;
  }
}
</code></pre></div><p>修改 routing.module.ts，在需要拦截的路由中添加 canActivate 属性</p> <div class="language- extra-class"><pre class="language-text"><code>import { AuthGuard } from '../auth/auth.guard';

const adminRoutes: Routes = [
  {
    path: 'admin',
    component: AdminComponent,
    canActivate: [AuthGuard],
    children: [
        {
        path: '',
            children: [
                { path: 'crises', component: ManageCrisesComponent },
                { path: 'heroes', component: ManageHeroesComponent },
                { path: '', component: AdminDashboardComponent }
            ]
        }
    ]
  }
];

@NgModule({
  imports: [
    RouterModule.forChild(adminRoutes)
  ],
  exports: [
    RouterModule
  ]
})
export class AdminRoutingModule {}
</code></pre></div><h1 id="自定义修饰符"><a href="#自定义修饰符" class="header-anchor">#</a> 自定义修饰符</h1> <p>这里创建一个 click.stop 的自定义指令，功能和 vue 的 @click.stop 修饰符是一样的，阻止点击冒泡。</p> <p>在命令行中通过 ng generate directive name 命令生成 directive 文件</p> <div class="language- extra-class"><pre class="language-text"><code>import { Directive, Output, EventEmitter, Renderer2, ElementRef } from '@angular/core';

@Directive({
  selector: '[click.stop]'
})
export class ClickStopDirective {

  @Output(&quot;click.stop&quot;) stopPropEvent = new EventEmitter();
  unsubscribe: () =&gt; void;

  constructor(
    private renderer?: Renderer2,
    private element?: ElementRef) {
  }

  ngOnInit() {
    this.unsubscribe = this.renderer.listen(
      this.element.nativeElement, 'click', event =&gt; {
        event.stopPropagation();
        this.stopPropEvent.emit(event);
      });
  }

  ngOnDestroy() {
    this.unsubscribe();
  }
}
</code></pre></div><p>在 app.module.ts 中引入</p> <div class="language- extra-class"><pre class="language-text"><code>import { ClickStopDirective } from './directive/click-stop.directive';

@NgModule({
 declarations: [
    ...
    ClickStopDirective,
    ...
],
imports: [
    ...
],
providers: [
    ...
],
bootstrap: [
    ...
]
})

export class AppModule { }
</code></pre></div><p>最后在组件之中使用</p> <div class="language- extra-class"><pre class="language-text"><code>
&lt;div (click)=&quot;fn()&quot;&gt;
  &lt;p (click.stop)=&quot;fn1()&quot;&gt;阻止冒泡&lt;/p&gt;
&lt;/div&gt;

``
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blogs/es6/async.html" class="prev">
        异步解决方案
      </a></span> <span class="next"><a href="/blogs/webpack/base-config.html">
        基于 webpack 配置一个基本的启动程序
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/blogs/assets/js/app.1da6cb40.js" defer></script><script src="/blogs/assets/js/2.2c761157.js" defer></script><script src="/blogs/assets/js/7.64e209ff.js" defer></script>
  </body>
</html>
